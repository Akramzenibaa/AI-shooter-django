{% extends "base.html" %}
{% load static %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/landing.css' %}">
<style>
    /* Add some specific overrides for icons and interactions */
    .icon-box {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem;
        border-radius: 0.5rem;
        background: var(--glass);
        margin-bottom: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="landing-page">
    <nav class="nav-container" id="navbar">
        <div class="nav-content">
            <div class="logo">
                <img src="{% static 'assets/logo.png' %}" alt="Logo" width="32" height="32" fetchpriority="high">
                <span>AI Shooter</span>
            </div>
            <div class="nav-links">
                {% if user.is_authenticated %}
                <a href="{% url 'core:dashboard' %}" class="nav-btn no-decoration">
                    Launch App
                </a>
                {% endif %}
                {% if user.is_authenticated %}
                <form action="{% url 'account_logout' %}" method="post" class="form-inline">
                    {% csrf_token %}
                    <input type="hidden" name="next" value="{{ request.path }}">
                    <button type="submit" class="nav-btn secondary ml-small">Sign
                        Out</button>
                </form>
                {% else %}
                <a href="{% url 'account_login' %}?next={{ request.path }}"
                    class="nav-btn secondary mx-small no-decoration">Login</a>
                <a href="{% url 'account_signup' %}?next={{ request.path }}" class="nav-btn no-decoration">Register</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <main>
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-bg-glow"></div>
            <div class="hero-content stagger-container" id="hero-stagger">
                <h1 class="hero-title">
                    Elevate Your Product <br>
                    <span>Photography with AI</span>
                </h1>
                <p class="hero-subtitle delay-1">
                    Transform ordinary product shots into professional, high-converting images in seconds. No studio
                    required.
                </p>
                <div class="cta-group delay-2">
                    <a href="{% url 'core:dashboard' %}" class="primary-cta">
                        Start Generating <i data-lucide="arrow-right"></i>
                    </a>
                    <a href="#how-it-works" class="secondary-cta">
                        How it Works
                    </a>
                </div>
            </div>
        </section>

        <!-- Trust Section -->
        <section class="trust-section">
            <h3 class="trust-title">TRUSTED BY 10,000+ SELLERS ON</h3>
            <div class="logos-grid">
                <div class="logo-item">Shopify</div>
                <div class="logo-item opacity-80">Amazon</div>
                <div class="logo-item">Etsy</div>
                <div class="logo-item">WooCommerce</div>
                <div class="logo-item">Wix</div>
            </div>
        </section>

        <!-- Comparison Section -->
        <section class="showcase-section reveal-up">
            <div class="showcase-container">
                <div class="comparison-container" id="comparison-slider">
                    <img src="{% static 'assets/after.jpg' %}" alt="After" class="comparison-image after"
                        draggable="false" width="1200" height="800" loading="lazy">
                    <img src="{% static 'assets/before.jpg' %}" alt="Before" class="comparison-image before"
                        draggable="false" id="before-img" width="1200" height="800" loading="lazy">

                    <div class="slider-handle" id="slider-handle">
                        <div class="slider-line"></div>
                        <div class="slider-button">
                            <i data-lucide="move-horizontal" class="slider-icon-dark"></i>
                        </div>
                    </div>

                    <div class="labels">
                        <span class="label before-label" id="before-label">Original</span>
                        <span class="label after-label" id="after-label">AI Enhanced</span>
                    </div>
                </div>
                <p class="hero-subtitle comparison-desc">
                    Drag the slider to see the magic
                </p>
            </div>
        </section>

        <!-- How It Works Section -->
        <section id="how-it-works" class="steps-section">
            <h2 class="section-title animate-on-scroll">How It Works</h2>
            <div class="steps-grid stagger-container">
                <div class="step-card">
                    <div class="step-number">01</div>
                    <div class="step-content">
                        <h3 class="step-title">Upload</h3>
                        <p class="feature-desc">Upload your raw product photo. Our AI accepts all standard formats.</p>
                    </div>
                </div>
                <div class="step-card delay-1">
                    <div class="step-number">02</div>
                    <div class="step-content">
                        <h3 class="step-title">Choose Mode</h3>
                        <p class="feature-desc">Select your desired generation mode: Campaign, On Model, or Clean
                            Background, and sit back while our AI works its magic.</p>
                    </div>
                </div>
                <div class="step-card delay-2">
                    <div class="step-number">03</div>
                    <div class="step-content">
                        <h3 class="step-title">Sell</h3>
                        <p class="feature-desc">Download your 4K studio-quality image and boost your conversion rates.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="features-section reveal-up">
            <h2 class="section-title">Why Choose AI Shooter?</h2>
            <div class="grid stagger-container">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i data-lucide="zap"></i>
                    </div>
                    <h3 class="feature-title">Studio Quality</h3>
                    <p class="feature-desc">Get professional lighting and shadows that make your products pop without
                        expensive equipment.</p>
                </div>
                <div class="feature-card delay-1">
                    <div class="feature-icon">
                        <i data-lucide="image"></i>
                    </div>
                    <h3 class="feature-title">AI Upscaling</h3>
                    <p class="feature-desc">Transform standard shots into crisp 4K masterpieces ready for high-end
                        marketing campaigns.</p>
                </div>
                <div class="feature-card delay-2">
                    <div class="feature-icon">
                        <i data-lucide="layers"></i>
                    </div>
                    <h3 class="feature-title">Multiple Modes</h3>
                    <p class="feature-desc">Choose between creative campaigns, professional model integrations, or clean
                        e-commerce backgrounds.</p>
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section id="pricing" class="pricing-section reveal-up">
            <h2 class="section-title">Investment Plans</h2>
            <p class="section-subtitle">Choose the plan that fits your creative scale.</p>

            <div class="pricing-toggle">
                <button class="toggle-btn active" data-type="subscription">Monthly Subscriptions</button>
                <button class="toggle-btn" data-type="credit-pack">One-Time Credits</button>
            </div>

            <!-- Subscriptions Grid -->
            <div id="subscription-grid" class="pricing-grid stagger-container visible">
                <div class="pricing-card">
                    <div class="plan-name">Starter Shop</div>
                    <div class="plan-price">$39<span>/mo</span></div>
                    <div class="plan-credits">40 <span>Credits</span></div>
                    <ul class="plan-features">
                        <li><i data-lucide="check"></i> 40 High-Res PNGs</li>
                        <li><i data-lucide="check"></i> 2K Resolution</li>
                        <li><i data-lucide="check"></i> Cloud Storage</li>
                        <li><i data-lucide="check"></i> Commercial Rights</li>
                    </ul>
                    <a href="{% url 'accounts:create_checkout' 'd6054df6-a60b-4e43-a481-9edf31547ef3' %}"
                        class="plan-btn">Get Started</a>
                </div>
                <div class="pricing-card featured">
                    <div class="plan-badge">Most Popular</div>
                    <div class="plan-name">Growth Brand</div>
                    <div class="plan-price">$99<span>/mo</span></div>
                    <div class="plan-credits">140 <span>Credits</span></div>
                    <ul class="plan-features">
                        <li><i data-lucide="check"></i> 140 High-Res PNGs</li>
                        <li><i data-lucide="check"></i> Priority API Access</li>
                        <li><i data-lucide="check"></i> 2K Resolution</li>
                        <li><i data-lucide="check"></i> Cloud Storage</li>
                        <li><i data-lucide="check"></i> Commercial Rights</li>
                    </ul>
                    <a href="{% url 'accounts:create_checkout' '0e0234e8-2f2e-48f2-a91f-d2328ceea170' %}"
                        class="plan-btn primary">Elevate
                        Now</a>
                </div>
                <div class="pricing-card">
                    <div class="plan-name">Agency Elite</div>
                    <div class="plan-price">$199<span>/mo</span></div>
                    <div class="plan-credits">320 <span>Credits</span></div>
                    <ul class="plan-features">
                        <li><i data-lucide="check"></i> 320 High-Res PNGs</li>
                        <li><i data-lucide="check"></i> 4K Resolution Ready</li>
                        <li><i data-lucide="check"></i> Priority API Access</li>
                        <li><i data-lucide="check"></i> Priority Support</li>
                        <li><i data-lucide="check"></i> Cloud Storage</li>
                        <li><i data-lucide="check"></i> Commercial Rights</li>
                    </ul>
                    <a href="{% url 'accounts:create_checkout' '2b6ead44-d6b8-4098-a8e0-91e0609c5e04' %}"
                        class="plan-btn">Scale Now</a>
                </div>
            </div>


            <!-- Credit Packs Grid -->
            <div id="credit-pack-grid" class="pricing-grid stagger-container hidden">
                <div class="pricing-card">
                    <div class="plan-name">Trial Pack</div>
                    <div class="plan-price">$12</div>
                    <div class="plan-credits">10 <span>Credits</span></div>
                    <ul class="plan-features">
                        <li><i data-lucide="check"></i> 10 High-Res PNGs</li>
                        <li><i data-lucide="check"></i> No Subscription</li>
                        <li><i data-lucide="check"></i> Valid Forever</li>
                    </ul>
                    <a href="{% url 'accounts:create_checkout' '5a1609dd-2475-4111-953a-220736586b2f' %}"
                        class="plan-btn">Buy Now</a>
                </div>
                <div class="pricing-card featured">
                    <div class="plan-badge">Best Value</div>
                    <div class="plan-name">Studio Pack</div>
                    <div class="plan-price">$30</div>
                    <div class="plan-credits">30 <span>Credits</span></div>
                    <ul class="plan-features">
                        <li><i data-lucide="check"></i> 30 High-Res PNGs</li>
                        <li><i data-lucide="check"></i> No Subscription</li>
                        <li><i data-lucide="check"></i> Valid Forever</li>
                    </ul>
                    <a href="{% url 'accounts:create_checkout' 'aafc1c0e-bd35-479d-bd16-7911f93a9bad' %}"
                        class="plan-btn primary">Buy Now</a>
                </div>
                <div class="pricing-card">
                    <div class="plan-name">Pro Pack</div>
                    <div class="plan-price">$79</div>
                    <div class="plan-credits">100 <span>Credits</span></div>
                    <ul class="plan-features">
                        <li><i data-lucide="check"></i> 100 High-Res PNGs</li>
                        <li><i data-lucide="check"></i> Premium Support</li>
                        <li><i data-lucide="check"></i> Valid Forever</li>
                    </ul>
                    <a href="{% url 'accounts:create_checkout' 'd54fec1a-11b5-49ad-998f-3acc09459852' %}"
                        class="plan-btn">Buy Now</a>
                </div>
            </div>
        </section>

        <!-- Final CTA -->

        <!-- Final CTA -->
        <section class="hero-section reveal-up final-cta-section">
            <div class="final-cta-wrapper">
                <h2 class="hero-title final-cta-title">Ready to transform your workflow?</h2>
                <br>
                <a href="{% url 'core:dashboard' %}" class="primary-cta final-cta-button">
                    Try AI Shooter Now
                </a>
            </div>
        </section>
    </main>

    <footer class="landing-footer">
        <div class="footer-content">
            <div class="footer-brand">
                <h2>AI Shooter</h2>
                <p class="footer-text-muted">Professional product photography for everyone.</p>
            </div>
            <!-- Standard Footer Links -->
            <div class="footer-links">
                <h3>Product</h3>
                <ul>
                    <li><a href="#how-it-works">How it Works</a></li>
                    <li><a href="#features">Features</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h3>Company</h3>
                <ul>
                    <li><a href="{% url 'core:about' %}">About</a></li>
                    <li><a href="{% url 'core:blog' %}">Blog</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h3>Legal</h3>
                <ul>
                    <li><a href="{% url 'core:privacy' %}">Privacy</a></li>
                    <li><a href="{% url 'core:terms' %}">Terms</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2025 AI Shooter. All rights reserved.
        </div>
    </footer>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Navbar scroll effect
    const navbar = document.getElementById('navbar');
    window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });

    // Comparison Slider Logic
    const slider = document.getElementById('comparison-slider');
    const beforeImg = document.getElementById('before-img');
    const handle = document.getElementById('slider-handle');
    const beforeLabel = document.getElementById('before-label');
    const afterLabel = document.getElementById('after-label');

    let isResizing = false;

    function setPosition(x) {
        const rect = slider.getBoundingClientRect();
        const offsetX = x - rect.left;
        const position = Math.min(Math.max((offsetX / rect.width) * 100, 0), 100);

        beforeImg.style.clipPath = `inset(0 ${100 - position}% 0 0)`;
        handle.style.left = `${position}%`;

        beforeLabel.style.opacity = position > 10 ? 1 : 0;
        afterLabel.style.opacity = position < 90 ? 1 : 0;
    }

    slider.addEventListener('mousedown', () => isResizing = true);
    window.addEventListener('mouseup', () => isResizing = false);
    window.addEventListener('mousemove', (e) => {
        if (!isResizing) return;
        setPosition(e.clientX);
    });

    // Touch support
    slider.addEventListener('touchstart', () => isResizing = true);
    window.addEventListener('touchend', () => isResizing = false);
    window.addEventListener('touchmove', (e) => {
        if (!isResizing) return;
        setPosition(e.touches[0].clientX);
    });

    // Initial position
    setPosition(slider.getBoundingClientRect().left + slider.getBoundingClientRect().width / 2);

    // Initialize Lucide icons
    lucide.createIcons();

    // Intersection Observer for animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                // Once visible, we can stop observing
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    // Elements to observe
    const animElements = document.querySelectorAll('.animate-on-scroll, .reveal-up, .stagger-container');
    animElements.forEach(el => observer.observe(el));

    // Pricing Toggle Logic
    const toggleBtns = document.querySelectorAll('.toggle-btn');
    const subGrid = document.getElementById('subscription-grid');
    const packGrid = document.getElementById('credit-pack-grid');

    toggleBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            toggleBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            if (btn.dataset.type === 'subscription') {
                subGrid.classList.remove('hidden');
                subGrid.classList.add('visible');
                packGrid.classList.remove('visible');
                packGrid.classList.add('hidden');
            } else {
                packGrid.classList.remove('hidden');
                packGrid.classList.add('visible');
                subGrid.classList.remove('visible');
                subGrid.classList.add('hidden');
            }
        });
    });

    // Special case for hero stagger which should run immediately
    setTimeout(() => {
        document.getElementById('hero-stagger').classList.add('visible');
    }, 100);
</script>
{% endblock %}